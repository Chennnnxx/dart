
extends ../ui_layout
  
block content
  -var cdn = "https://dhpd030vnpk29.cloudfront.net";

  .computer.only.tablet.only.four.wide.column 
    .ui.fixed.sticky.sideMenu(style='width: 272px !important; height: 500px !important;')
      .ui.vertical.menu(style="width:auto;")
        a.active.item(data-value='feed')#feedsteps 
          i.icon.home
          |  Home
        a.item(data-value='notifications')#notificationsteps
          i.icon.bell
          |  Notifications
    
  //-mobile only version of the menu
  .mobile.only.sixteen.wide.column
    .ui.top.fixed.vertical.menu(style="width:100%; padding-top:5em;")
      a.active.item(data-value='feed')#feedsteps
        i.icon.home
        |  Home
      a.item(data-value='notifications')#notificationsteps      
        i.icon.bell
        |  Notifications
        .ui.red.right.pointing.label !
    br
    br

  #content.eight.wide.computer.ten.wide.tablet.sixteen.wide.mobile.column()
    .ui.fixed.bottom.sticky(style="padding-bottom:2em; padding-left:1em; padding-right:1em; display:none;")#removeHidden
      .ui.icon.compact.message.warning
        i.close.icon
        i.question.icon.float
        .content
          .ui.header Need some help? 
          p Make sure you are clicking "Got it" on the blue dots!
    //-Settings display
    .ui.container.settingsDisplay
      h2.ui.header(data-hint="Most social media sites have settings that you can use to control the number of notifications you get. It will look similar to this page." data-hintPosition='middle-middle') Notification Settings
      .ui.divider
      br
      form.ui.form
        .field(data-hint="Here, you can change the number of notifications you get for different types of content. Try pausing notifications for a while by turning this setting off." data-hintPosition='middle-middle')
          br
          .ui.toggle.checkbox(name='popupAlertsCheckbox')
            input(type='checkbox' name='popupAlerts')
            label Pause All
        span.settingLabel This will pause all notifications
        br
        br
        
        .field#pauseTimeSelectField
          label(style="font-size:120%;") How long would you like to pause?
            br
            br
            .ui.selection.dropdown(name='pauseTimeSelect')
              input(type='hidden')
              i.dropdown.icon
              .default.text 
              .menu
                .item(data-value='15 minutes' style="font-size:100%") 15 minutes
                .item(data-value='1 hour' style="font-size:100%") 1 hour
                .item(data-value='2 hours' style="font-size:100%") 2 hours
                .item(data-value='4 hours' style="font-size:100%") 4 hours
                .item(data-value='8 hours' style="font-size:100%") 8 hours
        br
        br    
        
              
          
    


block scripts
  script().
    
    //activating a normal dropdown (the one used in the habits module settings)
    $('.ui.selection.dropdown').dropdown('set selected', '1 hour');
    
    var literacy_counter = 0;
    
    function startIntro(){  
      var hints = introJs().addHints()
      var clickCount = 0; 
      
      //for providing guidance message
      hints.onhintclick(function(hintElement, item, stepId) {
          //console.log('hint clicked', hintElement, item, stepId);
          clickCount++;
          if(clickCount > 5){ 
            //show the guidance message, user probably doesn't know to click "got it"
            if($('#removeHidden').is(":hidden")){
              $('#removeHidden').transition('fade');
            } else {
              $('#removeHidden').transition('bounce');
            }
          }
      });
      
      hints.onhintclose(function(e) {
        clickCount = 0; //The user knows to click "got it"
        if($('#removeHidden').is(":visible")){
          $("#removeHidden").transition('fade');
        }
        literacy_counter++;
        if(literacy_counter == 2) {
         window.location.href='/sim4/habits';
        }
      });
      
      //showing the "Need some help?" guidance message after 2 minutes on the page (assuming the user doesn't know to click "Got it")
      setTimeout(function(){
        if($('#removeHidden').is(":hidden")){
          console.log("SHOW GUIDANCE");
          $('#removeHidden').transition('fade');
        }
      },120000);
    };
       

    $(window).on("load", function() {
      startIntro();
    });
