extends ui_layout
  
block content

  
  
  .computer.only.tablet.only.four.wide.column 
    .ui.card
      .image
        if user.profile.picture
          img(src=user.profile.picture)
        else
          img(src=user.gravatar(60))
      .content
        a.header= user.profile.name || user.email || user.id

  .eight.wide.computer.ten.wide.tablet.sixteen.wide.mobile.column 
    .ui.fluid.left.labeled.right.icon.input
      .ui.label
        if user.profile.picture
          img.ui.avatar.image(src=user.profile.picture)
        else
          img.ui.avatar.image(src=user.gravatar(60))
      input(type='text', placeholder='Share your meal')
      i.big.photo.link.icon
    each val in script
      .ui.fluid.card.dim(postID=val.id, ui=user.ui, notify=user.notify, state=val.state || 'unread')
        .ui.dimmer.flag
              .content
                .center
                  h2.ui.inverted.icon.header
                    i.red.flag.icon
                    |  You&apos;ve flagged this!
                    h3.ui.inverted.header
                      span="The admins will review this post further. We are sorry you had this experience."
        if user.ui == 'ui'
          if val.read 
            .ui.inverted.active.read.dimmer
              .content
                .center
                  h2.ui.icon.header
                    i.unhide.icon
                    |  You&apos;ve read this!
                  br
                  if user.notify != no
                    h3.ui.icon.header
                      img.ui.avatar.image(src=val.actor.profile.picture)
                      span=" "+val.actor.profile.name+" "
                      | has been notified
                      br
                      if val.reply
                        img.ui.avatar.image(src=val.reply.actor.profile.picture)
                        span=" "+val.reply.actor.profile.name+" "
                        | has been notified
                      br
                  br
                  button.ui.black.button.reread Read Again?                
          else 
            .ui.inverted.read.dimmer
              .content
                .center
                  h2.ui.icon.header
                    i.unhide.icon
                    |  You&apos;ve read this!
                  br
                  if user.notify != no
                    h3.ui.icon.header
                      img.ui.avatar.image(src=val.actor.profile.picture)
                      span=" "+val.actor.profile.name+" "
                      | has been notified
                      br
                      if val.reply
                        img.ui.avatar.image(src=val.reply.actor.profile.picture)
                        span=" "+val.reply.actor.profile.name+" "
                        | has been notified
                      br
                  br
                  button.ui.black.button.reread Read Again?

        if val.reply
          .content
            .right.floated.time.meta= (user.createdAt.getTime() + val.time)
            |
            a.ui.avatar.image(href='/user/'+val.actor.username)
              img(src=val.actor.profile.picture)
            a(href='/user/'+val.actor.username)
              span=val.actor.profile.name
          .content
            .description=val.body
          .extra.content
            .ui.fluid.card
              .content
                .right.floated.time.meta= (user.createdAt.getTime() + val.reply.time)
                |
                a(href='/user/'+val.reply.actor.username)   
                  img.ui.avatar.image(src=val.reply.actor.profile.picture)
                  span=val.reply.actor.profile.name
              if val.reply.picture
                .image
                  img(src=val.reply.picture)
              .content
                .description=val.reply.body
          .three.ui.bottom.attached.icon.buttons
            .ui.animated.button(tabindex='0')
              .visible.content
                i.reply.icon
              .hidden.content Reply to Post
            .ui.vertical.animated.button(tabindex='1')
              .visible.content
                i.flag.icon
              .hidden.content Report Post
            if val.like
              .ui.animated.fade.red.button(tabindex='2')
                .visible.content
                  i.like.icon
                .hidden.content Like Post
            else
              .ui.animated.fade.button(tabindex='2')
                .visible.content
                  i.like.icon
                .hidden.content Like Post
        else
          .content
            .right.floated.time.meta= (user.createdAt.getTime() + val.time)
            |  
            a(href='/user/'+val.actor.username)
              img.ui.avatar.image(src=val.actor.profile.picture)
              span=val.actor.profile.name
          .image
            img(src=val.picture)
          .content
            .description=val.body
          .three.ui.bottom.attached.icon.buttons
            .ui.animated.button(tabindex='0')
              .visible.content
                i.reply.icon
              .hidden.content Reply to Post
            .ui.vertical.animated.button(tabindex='1')
              .visible.content
                i.flag.icon
              .hidden.content Report Post
            if val.like
              .ui.animated.fade.red.button(tabindex='2')
                .visible.content
                  i.like.icon
                .hidden.content Like Post
            else
              .ui.animated.fade.button(tabindex='2')
                .visible.content
                  i.like.icon
                .hidden.content Like Post