extends ui_layout
  
block content
  
  .computer.only.tablet.only.four.wide.column 
    .ui.card
      .image
        if user.profile.picture
          img(src='/user_post/'+user.profile.picture)
        else
          img(src=user.gravatar(60))
      .content
        a.header= user.profile.name || user.email || user.id
        .description=user.profile.bio
        .description
          if user.profile.location
            i.marker.icon
            span=user.profile.location
      .one.ui.bottom.attached.icon.buttons
          button.ui.editprofile.button(data-tooltip='Update Your Profile', data-position='bottom left')
            i.write.icon


  .eight.wide.computer.ten.wide.tablet.sixteen.wide.mobile.column 
    each val in posts
      .ui.fluid.card
        if val.reply
          .content
            .right.floated.time.meta= (user.createdAt.getTime() + val.relativeTime)
            |  
            a.ui.avatar.image(href='/me')
              if user.profile.picture
                img(src='/user_post/'+user.profile.picture)
              else
                img(src=user.gravatar(60))
              a(href='/me')
                span=user.profile.name || user.email || user.id
          .content
            .description=val.body
          .extra.content
            .ui.fluid.card
              .content
                .right.floated.time.meta= (user.createdAt.getTime() + val.reply.time)
                |  
                img.ui.avatar.image(src=val.reply.actor.profile.picture)
                span=val.reply.actor.profile.name
              if val.reply.picture
                .image
                  img(src="/"+val.reply.picture)
              .content
                .description=val.reply.body
          .three.ui.bottom.attached.icon.buttons
            .ui.animated.button(tabindex='0')
              .visible.content
                i.reply.icon
              .hidden.content Reply to Post
            .ui.vertical.animated.button(tabindex='0')
              .visible.content
                i.flag.icon
              .hidden.content Report Post
            .ui.animated.fade.button(tabindex='0')
              .visible.content
                i.like.icon
              .hidden.content Like Post
        else
          .content
            .right.floated.time.meta= (user.createdAt.getTime() + val.relativeTime)
            |  
            a.ui.avatar.image(href='/me')
              if user.profile.picture
                img(src='/user_post/'+user.profile.picture)
              else
                img(src=user.gravatar(60))
            a(href='/me')
              span=user.profile.name || user.email || user.id
          .image
            img(src='/user_post/'+val.picture)
          .content
            .description=val.body
          .three.ui.bottom.attached.icon.buttons
            .ui.animated.button(tabindex='0')
              .visible.content
                i.reply.icon
              .hidden.content Reply to Post
            .ui.vertical.animated.button(tabindex='0')
              .visible.content
                i.flag.icon
              .hidden.content Report Post
            .ui.animated.fade.button(tabindex='0')
              .visible.content
                i.like.icon
              .hidden.content Like Post